API Guide (FR)
Comment r√©cup√©rer vos statistiques via l'API.

Powerspace API ‚Äì Guide D√©veloppeur
Comment r√©cup√©rer vos statistiques quotidiennes via l'API v4.

Informations cl√©s :

Base URL: https://api.powerspace.com
M√©thode: GET
Format date: YYYY-MM-DD
1. Aper√ßu
GET /v4/advertiser

R√©cup√®re les statistiques pour une journ√©e donn√©e. Les deux param√®tres requis sont date et token.

üìò
Note importante
Si aucune donn√©e n'est disponible pour la date demand√©e, l'API renvoie un tableau vide.

2. Authentification
G√©n√©rez un API token depuis l'interface Powerspace (onglet API), puis transmettez-le en query string : ?token=<VOTRE_TOKEN>.

Bonnes pratiques :

Stockez le token dans une variable d'environnement (ex. POWERS_API_TOKEN)
Ne commitez jamais le token en clair dans un d√©p√¥t
R√©voquez et reg√©n√©rez le token en cas d'exposition
3. Param√®tres
Nom	Type	Obligatoire	Exemple	Notes
date	string	Oui	2025-10-13	Format ISO 8601 YYYY-MM-DD. Par d√©faut, consid√©rez UTC.
token	string	Oui	********	Token API g√©n√©r√© dans l'interface.
4. Exemples d'appels
cURL
Bash

curl -s "https://api.powerspace.com/v4/advertiser?date=2025-10-13&token=${POWERS_API_TOKEN}"
Python (requests)
Python

import os, requests

BASE_URL = "https://api.powerspace.com/v4/advertiser"
TOKEN = os.environ["POWERS_API_TOKEN"]

res = requests.get(BASE_URL, params={"date": "2025-10-13", "token": TOKEN}, timeout=30)
res.raise_for_status()
ct = res.headers.get("content-type", "")
print(res.json() if "application/json" in ct else res.text)
Node.js (fetch)
JavaScript

const base = 'https://api.powerspace.com/v4/advertiser';
const token = process.env.POWERS_API_TOKEN;

(async () => {
  const url = base + `?date=2025-10-13&token=${token}`;
  const r = await fetch(url);
  if (!r.ok) throw new Error(r.status + ' ' + r.statusText);
  const ct = r.headers.get('content-type') || '';
  console.log(ct.includes('application/json') ? await r.json() : await r.text());
})();
Bash ‚Äì plage de dates
Bash

start=2025-10-01; end=2025-10-07
current=$start
while [ "$current" != "$(date -I -d "$end + 1 day")" ]; do
  url="https://api.powerspace.com/v4/advertiser?date=$current&token=$POWERS_API_TOKEN"
  echo Fetching $current... >&2
  curl -s "$url" > "stats_$current.json"
  current=$(date -I -d "$current + 1 day")
done
5. Structure des r√©ponses
L'API peut renvoyer un JSON (statistiques de la journ√©e)

6. S√©curit√©
Stockez le token dans un secret (Vault, GitHub Actions, variables d'env. Docker, etc.)
Appliquez le principe du moindre privil√®ge
Renouvelez et r√©voquez p√©riodiquement les tokens inutilis√©s
7. Check-list mise en prod
‚úÖ Token inject√© via secret & variables d'environnement
‚úÖ Validation stricte du format YYYY-MM-DD
‚úÖ Gestion des cas sans donn√©es
‚úÖ Journalisation et alerting sur erreurs ‚â• 400
‚úÖ Retries/backoff sur 429/5xx
‚úÖ Tests d'int√©gration sur un √©chantillon de dates connues
Exemple pr√™t √† l'emploi
Bash

export POWERS_API_TOKEN=<VOTRE_TOKEN>
curl -s "https://api.powerspace.com/v4/advertiser?date=$(date -I)&token=${POWERS_API_TOKEN}"